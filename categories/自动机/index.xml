<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>自动机 on 似水</title>
    <link>https://blog.lordash.de/categories/%E8%87%AA%E5%8A%A8%E6%9C%BA/</link>
    <description>Recent content in 自动机 on 似水</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 03 Apr 2021 17:44:18 +0000</lastBuildDate><atom:link href="https://blog.lordash.de/categories/%E8%87%AA%E5%8A%A8%E6%9C%BA/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>剑指Offer-20 表示数值的字符串</title>
      <link>https://blog.lordash.de/posts/solution/d903acfcaec856fe/</link>
      <pubDate>Sat, 03 Apr 2021 17:44:18 +0000</pubDate>
      
      <guid>https://blog.lordash.de/posts/solution/d903acfcaec856fe/</guid>
      <description>剑指Offer-20 表示数值的字符串 类型 字符串 自动机</description>
      <content:encoded><![CDATA[<h1 id="表示数值的字符串剑指offer-20httpsleetcode-cncomproblemsbiao-shi-shu-zhi-de-zi-fu-chuan-lcof">表示数值的字符串(<a href="https://leetcode-cn.com/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/">剑指Offer-20</a>)</h1>
<h2 id="题面">题面</h2>
<blockquote>
<p>请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串&quot;+100&quot;、&ldquo;5e2&rdquo;、&quot;-123&quot;、&ldquo;3.1416&rdquo;、&quot;-1E-16&quot;、&ldquo;0123&quot;都表示数值，但&quot;12e&rdquo;、&ldquo;1a3.14&rdquo;、&ldquo;1.2.3&rdquo;、&quot;+-5&quot;及&quot;12e+5.4&quot;都不是。</p>
</blockquote>
<h2 id="思路">思路</h2>
<p>自动机。</p>
<p>![状态转移](剑指Offer-20 表示数值的字符串/状态转移.png)</p>
<p>合法的结束状态有 2, 3, 7, 8 。</p>
<h2 id="代码">代码</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    <span style="color:#66d9ef">bool</span> isNumber(string s) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        unordered_map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> mp[<span style="color:#ae81ff">9</span>];
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        mp[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39; &#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; mp[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;s&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>; mp[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>; mp[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#39;.&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>        mp[<span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>; mp[<span style="color:#ae81ff">1</span>][<span style="color:#e6db74">&#39;.&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        mp[<span style="color:#ae81ff">2</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>; mp[<span style="color:#ae81ff">2</span>][<span style="color:#e6db74">&#39;.&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>; mp[<span style="color:#ae81ff">2</span>][<span style="color:#e6db74">&#39;e&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>; mp[<span style="color:#ae81ff">2</span>][<span style="color:#e6db74">&#39; &#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        mp[<span style="color:#ae81ff">3</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>; mp[<span style="color:#ae81ff">3</span>][<span style="color:#e6db74">&#39;e&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>; mp[<span style="color:#ae81ff">3</span>][<span style="color:#e6db74">&#39; &#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        mp[<span style="color:#ae81ff">4</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        mp[<span style="color:#ae81ff">5</span>][<span style="color:#e6db74">&#39;s&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>; mp[<span style="color:#ae81ff">5</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        mp[<span style="color:#ae81ff">6</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        mp[<span style="color:#ae81ff">7</span>][<span style="color:#e6db74">&#39;d&#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>; mp[<span style="color:#ae81ff">7</span>][<span style="color:#e6db74">&#39; &#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        mp[<span style="color:#ae81ff">8</span>][<span style="color:#e6db74">&#39; &#39;</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>        <span style="color:#66d9ef">char</span> t;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">char</span> c:s){
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>            <span style="color:#66d9ef">if</span>(<span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">&lt;=</span>c <span style="color:#f92672">&amp;&amp;</span> c<span style="color:#f92672">&lt;=</span><span style="color:#e6db74">&#39;9&#39;</span>) t <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;d&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>            <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span>(c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;+&#39;</span> <span style="color:#f92672">||</span> c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;-&#39;</span>) t <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;s&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>            <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span>(c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;e&#39;</span> <span style="color:#f92672">||</span> c<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;E&#39;</span>) t <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;e&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>            <span style="color:#66d9ef">else</span> t <span style="color:#f92672">=</span> c;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>            <span style="color:#66d9ef">if</span>(mp[p].find(t) <span style="color:#f92672">==</span> mp[p].end()) <span style="color:#66d9ef">return</span> false;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>            p <span style="color:#f92672">=</span> mp[p][t];
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>        }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>        <span style="color:#66d9ef">return</span> (p<span style="color:#f92672">==</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">==</span><span style="color:#ae81ff">3</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">==</span><span style="color:#ae81ff">7</span> <span style="color:#f92672">||</span> p<span style="color:#f92672">==</span><span style="color:#ae81ff">8</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>};
</span></span></code></pre></div>]]></content:encoded>
    </item>
    
  </channel>
</rss>
