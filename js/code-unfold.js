var CODE_MAX_HEIGHT=250,containers=[];function addCodeWrap(t){var i=t.wrap('<div class="js_highlight_container highlight-container"><div class="highlight-wrap"></div></div>').closest(".js_highlight_container"),n=$('\n    <div class="highlight-footer">\n      <a class="js_unfold_code_btn show-btn" href="javascript:;">展开代码<i class="fa fa-angle-down" aria-hidden="true"></i></a>\n    </div>\n    <a class="js_retract_code_btn hide-btn" href="javascript:;"><i class="fa fa-angle-up" aria-hidden="true"></i>收起代码</a>\n  ');return i.append(n),i}function codeUnfold(){$(".highlight").each((function(){if(!0===this.__render__)return!0;this.__render__=!0;var t=$(this),i=$(this).outerHeight();if(i>CODE_MAX_HEIGHT){var n=addCodeWrap(t,i);containers.push({$container:n,height:i,$hide:n.find(".js_retract_code_btn"),hasHorizontalScrollbar:this.scrollWidth>this.offsetWidth})}}))}$("body").on("click",".js_unfold_code_btn",(function(){$(this).closest(".js_highlight_container").addClass("on")})),$("body").on("click",".js_retract_code_btn",(function(){var t=$(this).closest(".js_highlight_container").removeClass("on"),i=$(window).scrollTop(),n=t.offset().top;$(this).css("top",0),i>n&&$("body, html").animate({scrollTop:t.offset().top-CODE_MAX_HEIGHT},600)})),$(window).on("scroll",(function(){var t=$(window).scrollTop(),i=[];for(let d=0;d<containers.length;d++){var n=containers[d],{$container:o,height:a,$hide:s,hasHorizontalScrollbar:e}=n;if(0===o.closest("body").length)continue;if(i.push(n),!o.hasClass("on"))continue;var r=o.offset().top,h=s.outerHeight(),c=parseInt(a-(e?17:0)-h);let _=parseInt(Math.min(Math.max(t-r,0),c));var l=parseInt($(window).height()/2*Math.sin(_/c*90*(2*Math.PI/360)));s.css("top",Math.min(_+l,c))}containers=i}));